import{t as T,a as $}from"../chunks/ZFOckceA.js";import{i as K}from"../chunks/Dad0V1OE.js";import{B as V,O as E,o as X,D as L,F as Y,$ as Z,Q as M,I as _,k as t,G as I,J as ee,y as b,R as te,P as O,a as k}from"../chunks/DTh33aiI.js";import{e as u,s as R}from"../chunks/BkIQD0EJ.js";import{s as ae,i as ne,a as re,b as q}from"../chunks/kw0HcHZK.js";import{a as se,e as ie,i as oe,s as ue}from"../chunks/3Hh5p6nu.js";import{w as le}from"../chunks/BOc2Zj5F.js";function y(i,o,d){if(d){if(i.classList.contains(o))return;i.classList.add(o)}else{if(!i.classList.contains(o))return;i.classList.remove(o)}}function c(i){return function(...o){var d=o[0];return d.preventDefault(),i==null?void 0:i.apply(this,o)}}function ce(i,o){return le(i,d=>void o.then(d))}var de=T("<em> </em>"),fe=T('<div class="w-64 flex-1 rounded-lg border border-gray-300 p-4 shadow-md" role="button"><strong> </strong> <!></div>'),pe=T('<div class="flex h-screen w-screen gap-4 p-4"></div>');function ke(i,o){V(o,!1);const[d,z]=ae(),l=()=>re(D,"$session",d),p=new URLSearchParams(location.search),v=p.get("people").split(",");p.get("session")||(p.set("session",String(new Date().getTime())),history.replaceState(null,"","?"+p.toString()));const A=parseInt(p.get("session")),D=ce(null,se(A).then(e=>(N(e.speakerDurations),e.interlocutors=Array.from(new Set([...e.interlocutors,...v])),e))),f=E(N());let m=E(!1);P();function N(e={}){return v.forEach(a=>!(a in e)&&(e[a]=0)),e}function P(){X(m,window.innerWidth>window.innerHeight)}function h(e){t(f)[e]||O(f,t(f)[e]=new Date().getTime())}function g(e){if(!l()||e==null)return;const a=new Date().getTime();q(D,k(l).speakerDurations[e]+=(a-t(f)[e])/1e3,k(l)),O(f,t(f)[e]=0),q(D,k(l).totalDuration=(a-l().date)/1e3,k(l)),ue(l())}function B(e){return v[Number(e.key)-1]}function F(e){const s=Math.floor(e/60),S=String(Math.floor(e%60)).padStart(2,"0");return s+":"+S}K();var w=pe();u("resize",Z,P),u("contextmenu",M,c(()=>{})),u("keydown",M,c(e=>h(B(e)))),u("keyup",M,c(e=>g(B(e)))),ie(w,5,()=>v,oe,(e,a)=>{var s=fe(),S=b(()=>h.bind(null,t(a))),G=b(()=>g.bind(null,t(a))),H=b(()=>h.bind(null,t(a))),J=b(()=>g.bind(null,t(a))),x=I(s),Q=I(x,!0);_(x);var U=ee(x,2);{var W=n=>{var r=de(),j=I(r,!0);_(r),L(C=>R(j,C),[()=>F(l().speakerDurations[t(a)])],te),$(n,r)};ne(U,n=>{l()!=null&&n(W)})}_(s),L(()=>{y(s,"w-full",!t(m)),y(s,"h-full",t(m)),y(s,"bg-gray-300",t(f)[t(a)]),R(Q,t(a))}),u("touchstart",s,c(function(...n){var r;(r=t(S))==null||r.apply(this,n)})),u("touchend",s,c(function(...n){var r;(r=t(G))==null||r.apply(this,n)})),u("mousedown",s,c(function(...n){var r;(r=t(H))==null||r.apply(this,n)})),u("mouseup",s,c(function(...n){var r;(r=t(J))==null||r.apply(this,n)})),u("mouseenter",s,c(n=>n.buttons&&h(t(a)))),u("mouseleave",s,c(n=>n.buttons&&g(t(a)))),$(e,s)}),_(w),L(()=>y(w,"flex-col",!t(m))),$(i,w),Y(),z()}export{ke as component};
